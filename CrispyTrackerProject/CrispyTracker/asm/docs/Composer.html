<html>
    <link rel="stylesheet" href="style.css">
    <h1>Musician's manual</h1>
    <p1><a href="Documentation.html">Go back to documentation</a></p1>
    <h2>Index</h2>
    <ol>
        <li><a href="#pre">Prerequisites</a></li>
        <li><a href="#sns">SNES Specifics</a></li>
        <ul>
            <li><a href="#req">Required Knowledge</a></li>
        </ul>
        <li><a href="#lay">Layout</a></li>
        <ul>
            <li><a href="#ord">Orders</a></li>
            <li><a href="#pat">Patterns</a></li>
            <li><a href="#chn">Channels</a></li>
            <li><a href="#row">Rows</a></li>
            <li><a href="#smp">Samples</a></li>
            <li><a href="#ins">Instruments</a></li>
        </ul>
        <li><a href="#ctr">Controls</a></li>
        <li><a href="#efx">Effects</a></li>
    </ol>
    
    <h2 id="pre">Prerequisites</h2>
    <p1>
        This document works best if you have a baseline knowledge of the SNES operations, however is not strictly nessecary. <br>
        If you want more information, then I suggest that you use some of the links below.
        <ul>
            <li><a href="https://problemkaputt.de/fullsnes.htm#snesaudioprocessingunitapu">Fullsnes</a></li>
            <li><a href="https://snes.nesdev.org/wiki/SNESdev_Wiki#Sound">SNESDev wiki</a></li>
            <li><a href="https://sneslab.net/wiki/S-SMP">Sneslab</a></li>
        </ul>
    </p1>

    <h2 id="sns">   SNES Specifics</h2>
    <h3 id="req">   Required Knowledge</h3>
    <p1>
        Here, there is some information that you cannot avoid knowing if you want to effeciently write music for the SNES.
        There are 4 main things:
        <ol>
            <li>Audio Playback</li>
            <li>Space limits</li>
            <li>Sample loops</li>
            <li>Echo functions</li>
        </ol>
        Without knowing these you may have a hard time working the SNES, so it's best to educate yourself on it. <br>
        These are the main notes, however there is <a href="https://snes.nesdev.org/wiki/S-SMP">better resources outwith here.</a>
    </p1>
    <br>
    <br>
    <h3>Audio Playback</h3>
    <p1>
        The SNES uses small recordings of real world audio in order to produce sounds, these are called Samples. <br>
        These samples can be played at a rate of 128KHz at most, but samples run natively 32KHz. This effectively means
        the maximum available pitch is dependant on the note and the samplerate of the given sample.
    </p1>
    <br>
    <br>
    <h3>Space limits</h3>
    <p1>
        The SNES is an old system, and as such it didn't have much memory to spare for audio. Overall, the audio part of the SNES can address at most <b>64 kilobytes of information.</b><br>
        Unfortunately for you, this will become a balancing act of space and quality with regards to samples. it will also have to track music data, echo buffer [we will get to that] and instrument space.<br>
        Generally, you want your samples to be a low sample rate and short, thus keeping a fair amount of space for other samples and music data, 16KHz should do fine.
    </p1>
    <br>
    <br>
    <h3>Sample loops</h3>
    <p1>
        Good thing for space is the SNES has some compression built in, however it comes with the snag that <b>sample loops have to be multiples of 16</b><br>
        There's not really much you can do about this other than try and format your samples to have loops at multiples of 16, but it's doable to get around that.
    </p1>
    <br>
    <br>
    <h3>Echo functions</h3>
    <p1>
        The SNES has the ability to send a given channel's data to an echo buffer set to a given delay value. <b>This delay value takes up 2kb of space per value</b>, eating up 30k at most with a delay value of 15.<br>
        Echo is not stricly needed in a track, but you must be willing to sacrifice 2k per delay value of data for the ability to use echo.
    </p1>
    <h2 id="lay">   Layout</h2>
    <h3 id="ord">   Orders</h3>
    <h3 id="pat">   Patterns</h3>
    <h3 id="chn">   Channels</h3>
    <h3 id="row">   Rows</h3>
    <h3 id="smp">   Samples</h3>
    <h3 id="ins">   Instruments</h3>
    <h2 id="ctr">   Controls</h2>
    <h2 id="efx">   Effects</h2>
    <p1>
        Crispytracker allows for 2 effects to be sent at once for the track. These effects are listed below
        <table>
            <tr>
                <th style="width: 15%;">Effect</th>
                <th style="width: 5%;">Index</th>
                <th style="width: 70%;">Description</th>
                <th style="width: 25%;">Breakdown</th>
            </tr>
            <tr>
                <th>Arpeggio</th>
                <th>$00</th>
                <th>Raises the note pitch relative to the 2 nibbles set in the effect value. [NOT SUPPORTED AS OF WRITING]</th>
                <th>$XY, X - first pitch, Y - second pitch</th>
            </tr>
            <tr>
                <th>Portamento Up</th>
                <th>$01</th>
                <th>Increases the pitch of the given note linearly.</th>
                <th>$XX, value added to pitch every tick</th>
            </tr>
            <tr>
                <th>Portamento Down</th>
                <th>$02</th>
                <th>Decreases the pitch of the given note linearly.</th>
                <th>$XX, value subtracted to pitch every tick</th>
            </tr>
            <tr>
                <th>Portamento Glide</th>
                <th>$03</th>
                <th>Glides note to desired pitch at the given row</th>
                <th>$XX, Glide speed</th>
            </tr>
            <tr>
                <th>Vibrato</th>
                <th>$04</th>
                <th>Oscillates the pitch of the current note</th>
                <th>$XY, X - Depth, Y - Speed</th>
            </tr>
            <tr>
                <th>-</th>
                <th>-</th>
                <th>-</th>
                <th>-</th>
            </tr>
            <tr>
                <th>Tremolando</th>
                <th>$07</th>
                <th>Oscillates the volume of the current channel</th>
                <th>$XY, X - Depth, Y - Speed</th>
            </tr>
            <tr>
                <th>Panning</th>
                <th>$08</th>
                <th>Sets the panning of a channel</th>
                <th>$XY, X - L volume, Y - R volume</th>
            </tr>
            <tr>
                <th>Speed</th>
                <th>$09</th>
                <th>Sets the speed of the track</th>
                <th>$XX, speed to apply to the track</th>
            </tr>
            <tr>
                <th>Volume Slide</th>
                <th>$0A</th>
                <th>Slides the volume of the track based on the input nibbles</th>
                <th>$XY, X - volume up, Y - volume down</th>
            </tr>
            <tr>
                <th>Goto</th>
                <th>$0B</th>
                <th>Sets order position to the specified index in the current subtune</th>
                <th>$XX, order index</th>
            </tr>
            <tr>
                <th>Retrigger</th>
                <th>$0C</th>
                <th>Plays note multiple times based off of input value [NOT SUPPORTED AS OF WRITING]</th>
                <th>$XX, ticks to wait before triggering next note</th>
            </tr>
            <tr>
                <th>Break</th>
                <th>$0D</th>
                <th>Forces order to go to next position</th>
                <th>$XX, does nothing</th>
            </tr>
            <tr>
                <th>Panbrello</th>
                <th>$0E</th>
                <th>Oscillates the panning of a given channel</th>
                <th>$XY, X - volume up, Y - volume down</th>
            </tr>
            <tr>
                <th>-</th>
                <th>-</th>
                <th>-</th>
                <th>-</th>
            </tr>
            <tr>
                <th>Echo delay</th>
                <th>$30</th>
                <th>Sets the delay value of the echo</th>
                <th>$XX, Echo value</th>
            </tr>
            <tr>
                <th>Echo feedback</th>
                <th>$31</th>
                <th>Sets the feedback value of the echo</th>
                <th>$XX, Feedback value</th>
            </tr>
            <tr>
                <th>Echo L</th>
                <th>$32</th>
                <th>Sets the volume of the left echo output</th>
                <th>$XX, Feedback value</th>
            </tr>
            <tr>
                <th>Echo R</th>
                <th>$33</th>
                <th>Sets the volume of the right echo output</th>
                <th>$XX, Feedback value</th>
            </tr>
            <tr>
                <th>Echo Filter 0-7</th>
                <th>$34-$3B</th>
                <th>Sets the volume of the Nth echo filter coeffecient</th>
                <th>$XX, Feedback value</th>
            </tr>
            <tr>
                <th>-</th>
                <th>-</th>
                <th>-</th>
                <th>-</th>
            </tr>
            <tr>
                <th>Flag Value 0-F</th>
                <th>$C0-$CF</th>
                <th>Sends a byte to the main CPU, typically used for timing code with audio hits [NOT SUPPORTED AS OF WRITING]</th>
                <th>$XX, Value</th>
            </tr>
            <tr>
                <th>-</th>
                <th>-</th>
                <th>-</th>
                <th>-</th>
            </tr>
            <tr>
                <th>Arp Speed</th>
                <th>$E0</th>
                <th>Sets the speed arp commands go [NOT SUPPORTED AS OF WRITING]</th>
                <th>$XX, Speed</th>
            </tr>
            <tr>
                <th>Portamento Up Controlled</th>
                <th>$E1</th>
                <th>Raises pitch by X semitones</th>
                <th>$XY, X - Speed, Y - Target Pitch</th>
            </tr>
            <tr>
                <th>Portamento Down Controlled</th>
                <th>$E2</th>
                <th>Lowers pitch by X semitones</th>
                <th>$XY, X - Speed, Y - Target Pitch</th>
            </tr>
            <tr>
                <th>-</th>
                <th>-</th>
                <th>-</th>
                <th>-</th>
            </tr>
            <tr>
                <th>Set Global Left</th>
                <th>$E8</th>
                <th>Sets the global volume of the left output</th>
                <th>$XX, Left Volume</th>
            </tr>
            <tr>
                <th>Set Global Right</th>
                <th>$E9</th>
                <th>Sets the global volume of the right output</th>
                <th>$XX, Right Volume</th>
            </tr>
            <tr>
                <th>Set Global Volume</th>
                <th>$EA</th>
                <th>Sets the global volume of the output</th>
                <th>$XX, Global Volume</th>
            </tr>
            <tr>
                <th>-</th>
                <th>-</th>
                <th>-</th>
                <th>-</th>
            </tr>
            <tr>
                <th>End</th>
                <th>$FF</th>
                <th>Stops track</th>
                <th>$XX, does nothing</th>
            </tr>
        </table>
    </p1>
</html>